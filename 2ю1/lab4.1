#include <iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

int c=0, h=0,k=0;
char str[100], str1[100]={0}, str2[100]={0};
char af[6]={'A','B','C','D','E','F'};
char a[6]={10, 11, 12, 13, 14, 15};

char* func(char* str)
{
    memset( str2, 0, 100);
    for(int i=0; i<strlen(str); i++)
    {
        if(isdigit(str[i]))
        {
            c=str[i]- '0';
            while(isdigit(str[i+1]))
            {
                c= c*10+(str[i+1]-'0');
                i++;
            }
            while(c>0)
            {
                if (c%16==0)
                {
                    str1[h]='O';
                }
                else
                {
                    str1[h]=c%16+'0';
                }
                for (int j=0; j<16; j++)
                {
                    if (str1[h]== a[j]+'0')
                    {
                        str1[h] = af[j];
                        break;
                    }
                }
                c/=16;
                h++;
            }
            str2[k++]='0';
            str2[k++] = 'x';
            for(int z = h-1;z > -1;z--)
            {
                if (str1[z]=='O')
                {
                    str2[k++]='0';
                }
                else
                {
                    str2[k++]=str1[z];
                }
            }
        }
        else 
        {
            str2[k++]=str[i];
        }
        h=0;
    }
    return str2;
}

void assert(char* kar, char* d);

int main()
{

    char *kar2 = new char[20];
    kar2 = "aaaaa258xxx";
    char d[20] = "aaaaa0x102xxx";
    assert(kar2, d);
    char *kar21 = new char[20];
    kar21 = "aaaaa432xxx";
    char d1[20] = "aaaaa0x1B0xxx";
    assert(kar21, d1);
    char *kar22 = new char[20];
    kar22 = "aa543aaa4xxx";
    char d2[20] = "aa0x21Faaa0x4xxx";
    assert(kar22, d2);

}

void assert(char *kar, char d[])
{
    bool a = true;
    char * otvet = func(kar);
    cout << otvet<<" \n";
    for (int i = 0; i < strlen(d); i++)
    {
        if (otvet[i] != d[i])
        {
            a = false;
            break;
        }
    }
    if (a == true )
    {
        cout<< " ok"<<endl;
    }
    else
    {
        cout<< "ne ok"<<endl;

    }
}
